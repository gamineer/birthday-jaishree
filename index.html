<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Birthday Treasure Hunt for Jaishree</title>
	<link
		href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Crimson+Text:ital,wght@0,400;0,600;1,400&display=swap"
		rel="stylesheet">
	<style>
		html,
		body {
			height: 100%;
			margin: 0;
			padding: 0;
			font-family: 'Crimson Text', serif;
			background: linear-gradient(120deg, #f8e8ff 0%, #e0f7fa 100%);
			min-height: 100vh;
			color: #3d2f20;
			line-height: 1.6;
			box-sizing: border-box;
		}
		/* ...rest of the CSS from treasure-hunt.html... */
	</style>
</head>

<body>
	<div class="progress-container" id="progressContainer" style="display:none;">
		<div class="progress-bar" id="progressBar" style="width: 0%;"></div>
	</div>
	<div class="container">
		<div class="header">
			<h1>Birthday Treasure Hunt</h1>
		</div>
		<div class="caring-message">Hi Jaishree, your magical birthday surprise is waiting!<br>Pick your favorite memory to
			begin.</div>
		<div id="draggable-photos">
			<img src="images/jaishree_white_one.jpg" class="draggable-img" draggable="true" id="img1"
				alt="Jaishree White Dress" />
			<img src="images/jaishree_full_two.jpg" class="draggable-img" draggable="true" id="img2" alt="Jaishree Full" />
			<img src="images/jaishree_saree_three.jpg" class="draggable-img" draggable="true" id="img3"
				alt="Jaishree Saree" />
			<img src="images/jaishree_four.jpg" class="draggable-img" draggable="true" id="img4" alt="Jaishree Four" />
		</div>
		<button class="next-btn" id="startBtn">Let's Go!</button>
		<div id="introScreen" style="display:none; text-align:center;">
			<div class="caring-message" style="margin-top:24px;">It's not very simple!<br>You have to answer a few questions &
				puzzles to find your gift.<br>But don't worry, I'm here for you every step of the way!</div>
			<button class="next-btn" id="beginHuntBtn">Start the Hunt</button>
		</div>
		<div class="question-container" id="question1" style="display:none;">
			<div class="question-number">1</div>
			<div class="question-text">
				What do you think my favorite memory about you is?
			</div>
			<div class="options-container">
				<button class="option" onclick="checkAnswer(1, 'wrong', this)">31st new year eve party</button>
				<button class="option" onclick="checkAnswer(1, 'wrong', this)">A full day chat with you!</button>
				<button class="option" onclick="checkAnswer(1, 'correct', this)">Talking to you everyday!</button>
			</div>
			<div class="feedback" id="feedback1"></div>
		</div>
		<div class="question-container" id="question2" style="display:none;">
			<div class="question-number">2</div>
			<div class="question-text">
				How much do I value our bond!
			</div>
			<div style="margin: 20px 0; width:100%; max-width:320px;">
				<input type="range" min="1" max="10" value="7" id="sliderAnswer" style="width: 100%;">
				<span id="sliderValue" style="font-weight:bold; color:#b47cff; margin-left:10px;">7</span>
			</div>
			<button class="option" onclick="checkAnswer(2, null, this)">Submit</button>
			<div class="feedback" id="feedback2"></div>
		</div>
		<div class="question-container" id="question3" style="display:none;">
			<div class="question-number">3</div>
			<div class="question-text">
				What do I like about you more than yourself?
			</div>
			<div style="margin: 20px 0; width:100%; max-width:320px;">
				<input type="text" id="textAnswer" class="option" placeholder="Type your answer..." style="width: 100%;">
			</div>
			<button class="option" onclick="checkAnswer(3, null, this)">Submit</button>
			<div class="feedback" id="feedback3"></div>
		</div>
		<button class="next-btn" id="nextBtn" onclick="nextQuestion()" style="display:none;" disabled>Next Question</button>
	</div>
	<script>
		// Sparkle effect for dreamy magic
		function createSparkle(x, y) {
			const sparkle = document.createElement('div');
			sparkle.className = 'sparkle';
			sparkle.style.left = x + 'px';
			sparkle.style.top = y + 'px';
			sparkle.innerHTML = `<svg width="18" height="18" viewBox="0 0 18 18"><polygon points="9,0 11,7 18,9 11,11 9,18 7,11 0,9 7,7" fill="#fff9c4" opacity=".7"/></svg>`;
			document.body.appendChild(sparkle);
			setTimeout(() => sparkle.remove(), 2500);
		}
		// Add sparkles on mousemove over images
		document.addEventListener('DOMContentLoaded', function () {
			document.querySelectorAll('.draggable-img').forEach(img => {
				img.addEventListener('mousemove', e => {
					if (Math.random() > 0.7) {
						const rect = img.getBoundingClientRect();
						createSparkle(rect.left + Math.random() * rect.width, rect.top + Math.random() * rect.height);
					}
				});
			});
		});
		// Main screen logic
		let currentQuestion = 1;
		let questionCompleted = false;
		document.addEventListener('DOMContentLoaded', function () {
			var slider = document.getElementById('sliderAnswer');
			var sliderValue = document.getElementById('sliderValue');
			if (slider && sliderValue) {
				slider.oninput = function () { sliderValue.textContent = this.value; };
			}
		});
		function checkAnswer(questionNum, result, element) {
			if (questionNum === 1) {
				const options = document.querySelectorAll('#question1 .option');
				const feedback = document.getElementById('feedback1');
				options.forEach(option => {
					option.disabled = true;
					option.style.pointerEvents = 'none';
				});
				feedback.style.display = 'none';
				if (result === 'correct') {
					element.classList.add('correct');
					questionCompleted = true;
					document.getElementById('nextBtn').disabled = false;
					document.getElementById('progressContainer').style.display = 'block';
					document.getElementById('progressBar').style.width = '33%';
					feedback.textContent = "Correct! You did it!";
					feedback.style.display = 'block';
				} else {
					element.classList.add('wrong');
					feedback.textContent = "Try again! Your birthday is not finished yet. You still have time. Don't lose hope and try again.";
					feedback.style.display = 'block';
					setTimeout(() => {
						element.classList.remove('wrong');
						options.forEach(option => {
							option.disabled = false;
							option.style.pointerEvents = 'auto';
						});
					}, 1200);
				}
			} else if (questionNum === 2) {
				const slider = document.getElementById('sliderAnswer');
				const feedback = document.getElementById('feedback2');
				const submitBtn = element;
				feedback.style.display = 'none';
				if (slider.value === '10') {
					questionCompleted = true;
					document.getElementById('nextBtn').disabled = false;
					document.getElementById('progressBar').style.width = '66%';
					feedback.textContent = "Correct! You did it!";
					feedback.style.display = 'block';
					slider.disabled = true;
					submitBtn.disabled = true;
					submitBtn.classList.add('correct');
				} else {
					feedback.textContent = "Try again! Your birthday is not finished yet. You still have time. Don't lose hope and try again.";
					feedback.style.display = 'block';
				}
			} else if (questionNum === 3) {
				const answer = document.getElementById('textAnswer').value.toLowerCase().trim();
				const feedback = document.getElementById('feedback3');
				const correctAnswers = ['hair'];
				feedback.style.display = 'none';
				if (correctAnswers.includes(answer)) {
					questionCompleted = true;
					document.getElementById('nextBtn').disabled = false;
					document.getElementById('progressBar').style.width = '100%';
					feedback.textContent = "Correct! 389 It was a tough choice!";
					feedback.style.display = 'block';
					document.getElementById('textAnswer').disabled = true;
					element.classList.add('correct');
				} else {
					feedback.textContent = "Try again! Your birthday is not finished yet. You still have time. Don't lose hope and try again.";
					feedback.style.display = 'block';
				}
			}
		}
		function nextQuestion() {
			if (questionCompleted) {
				document.getElementById('nextBtn').disabled = true;
				// Hide all questions
				for (let i = 1; i <= 3; i++) {
					document.getElementById('question' + i).classList.remove('active');
					document.getElementById('question' + i).style.display = 'none';
				}
				currentQuestion++;
				if (currentQuestion <= 3) {
					// Show next question
					document.getElementById('question' + currentQuestion).classList.add('active');
					document.getElementById('question' + currentQuestion).style.display = 'flex';
					questionCompleted = false;
				} else {
					// Show voice note screen before redirecting to book
					showVoiceNoteScreen();
				}
				// Voice note screen logic
				function showVoiceNoteScreen() {
					// Hide all main content
					document.querySelector('.container').style.display = 'none';
					document.getElementById('progressContainer').style.display = 'none';

					// Create overlay
					const overlay = document.createElement('div');
					overlay.id = 'voiceNoteOverlay';
					overlay.style.position = 'fixed';
					overlay.style.top = '0';
					overlay.style.left = '0';
					overlay.style.width = '100vw';
					overlay.style.height = '100vh';
					overlay.style.background = 'linear-gradient(120deg, #f8e8ff 0%, #e0f7fa 100%)';
					overlay.style.display = 'flex';
					overlay.style.flexDirection = 'column';
					overlay.style.alignItems = 'center';
					overlay.style.justifyContent = 'center';
					overlay.style.zIndex = '9999';

					// Caring message
					const msg = document.createElement('div');
					msg.innerHTML = `<h2 style="font-family:'Playfair Display',serif;color:#a77cff;font-size:1.5em;margin-bottom:10px;">A Special Voice Note for You</h2>
				<div style="color:#7a5fa4;font-family:'Crimson Text',serif;font-size:1.1em;margin-bottom:24px;text-align:center;max-width:340px;">Before you open your birthday book, listen to this message made just for you. Close your eyes, smile, and feel the magic! 49c</div>`;
					overlay.appendChild(msg);

					// Voice note player UI
					const player = document.createElement('div');
					player.style.display = 'flex';
					player.style.flexDirection = 'column';
					player.style.alignItems = 'center';
					player.style.justifyContent = 'center';
					player.style.background = 'rgba(255,255,255,0.95)';
					player.style.borderRadius = '22px';
					player.style.boxShadow = '0 4px 24px #b47cff33';
					player.style.padding = '32px 24px 24px 24px';
					player.style.marginBottom = '24px';
					player.style.maxWidth = '340px';
					player.style.width = '90vw';

					// Play button
					const playBtn = document.createElement('button');
					playBtn.id = 'playVoiceBtn';
					playBtn.innerHTML = `<svg width="48" height="48" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#a77cff"/><polygon points="19,15 36,24 19,33" fill="#fff"/></svg>`;
					playBtn.style.background = 'none';
					playBtn.style.border = 'none';
					playBtn.style.cursor = 'pointer';
					playBtn.style.marginBottom = '18px';
					playBtn.style.transition = 'transform 0.2s';
					playBtn.onpointerdown = () => playBtn.style.transform = 'scale(0.95)';
					playBtn.onpointerup = () => playBtn.style.transform = 'scale(1)';
					player.appendChild(playBtn);

					// Waveform animation
					const waveform = document.createElement('div');
					waveform.id = 'voiceWaveform';
					waveform.style.display = 'flex';
					waveform.style.gap = '3px';
					waveform.style.justifyContent = 'center';
					waveform.style.alignItems = 'end';
					waveform.style.height = '32px';
					waveform.style.marginBottom = '10px';
					for (let i = 0; i < 16; i++) {
						const bar = document.createElement('div');
						bar.style.width = '6px';
						bar.style.height = (8 + Math.random() * 24) + 'px';
						bar.style.background = '#a77cff';
						bar.style.borderRadius = '3px';
						bar.style.transition = 'height 0.2s';
						waveform.appendChild(bar);
					}
					player.appendChild(waveform);

					// Audio element (replace src with your actual voice note file)
					const audio = document.createElement('audio');
					audio.id = 'voiceAudio';
					audio.src = 'voice-note-jaishree.mp3'; // Place your file in the same folder
					audio.preload = 'auto';
					player.appendChild(audio);

					// Play logic and waveform animation
					let animInterval = null;
					playBtn.onclick = function () {
						if (audio.paused) {
							audio.play();
						} else {
							audio.pause();
						}
					};
					audio.onplay = function () {
						playBtn.innerHTML = `<svg width="48" height="48" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#a77cff"/><rect x="16" y="15" width="6" height="18" rx="2" fill="#fff"/><rect x="26" y="15" width="6" height="18" rx="2" fill="#fff"/></svg>`;
						animInterval = setInterval(() => {
							Array.from(waveform.children).forEach(bar => {
								bar.style.height = (8 + Math.random() * 24) + 'px';
							});
						}, 120);
					};
					audio.onpause = audio.onended = function () {
						playBtn.innerHTML = `<svg width="48" height="48" viewBox="0 0 48 48"><circle cx="24" cy="24" r="24" fill="#a77cff"/><polygon points="19,15 36,24 19,33" fill="#fff"/></svg>`;
						clearInterval(animInterval);
						Array.from(waveform.children).forEach(bar => {
							bar.style.height = '12px';
						});
					};

					overlay.appendChild(player);

					// Continue button
					const continueBtn = document.createElement('button');
					continueBtn.textContent = 'Open Your Birthday Book 192';
					continueBtn.style.background = 'linear-gradient(90deg, #a77cff 0%, #ffd6e0 100%)';
					continueBtn.style.color = '#fff';
					continueBtn.style.border = 'none';
					continueBtn.style.borderRadius = '14px';
					continueBtn.style.fontSize = '1.1em';
					continueBtn.style.fontFamily = "'Playfair Display', serif";
					continueBtn.style.fontWeight = '700';
					continueBtn.style.padding = '16px 0';
					continueBtn.style.width = '90vw';
					continueBtn.style.maxWidth = '320px';
					continueBtn.style.margin = '0 auto';
					continueBtn.style.marginTop = '12px';
					continueBtn.style.boxShadow = '0 2px 12px #b47cff22';
					continueBtn.style.transition = 'background 0.3s, box-shadow 0.3s, transform 0.2s';
					continueBtn.onpointerdown = () => continueBtn.style.transform = 'scale(0.97)';
					continueBtn.onpointerup = () => continueBtn.style.transform = 'scale(1)';
					continueBtn.onclick = function () {
						audio.pause();
						window.location.href = 'realistic-book.html';
					};
					overlay.appendChild(continueBtn);

					document.body.appendChild(overlay);
				}
			}
		}
		document.getElementById('startBtn').onclick = function () {
			document.getElementById('draggable-photos').style.display = 'none';
			document.getElementById('startBtn').style.display = 'none';
			document.getElementById('introScreen').style.display = 'block';
		};
		document.getElementById('beginHuntBtn').onclick = function () {
			document.getElementById('introScreen').style.display = 'none';
			document.getElementById('progressContainer').style.display = 'block';
			document.getElementById('question1').classList.add('active');
			document.getElementById('question1').style.display = 'flex';
			document.getElementById('nextBtn').style.display = 'inline-block';
		};
	</script>
</body>

</html>
